<!DOCTYPE html>
<html>
<head>
    <title>Diddy Kong Racing | Old Row Maryland | v. 0.2.46</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="./js/aframe100.js"></script><!--https://aframe.io/releases/1.0.0/-->
    <script src="./js/aframe-ar.js"></script><!-- https://raw.githack.com/jeromeetienne/AR.js/2.2.0/aframe/build/-->
    <script src="./js/joystick.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        #controller-container{
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 100;
            top: 0;
            left: 0;
        }
    </style>
    <script>
        let MarkerGridTracker = {
            nyt : {
                initiated: false,
                active: false,
                tapping: false,
                counter: 0
            },
            mit : {
                initiated: false,
                active: false,
                tapping: false,
                counter: 0
            },
            hiro : {
                initiated: false,
                active: false,
                tapping: false,
                counter: 0
            },
            unibeat : {
                initiated: false,
                active: false,
                tapping: false,
                counter: 0
            },
            repressor: {
                onApplicationPage: 0,   //  0 = menu, 1 = nyt, 2 = mit (bakuas), 3 = hiro (facetime/bodytime), 4 = unibeat (office)
                onApplicationSection: null
            }
        };
        
        let stopTimeNYT, timeDiffNYT, stopTimeMIT, timeDiffMIT, stopTimeHIRO, timeDiffHIRO, stopTimeUNI, timeDiffUNI;
        
        document.addEventListener("DOMContentLoaded", function(){
            /*var joystick = new VirtualJoystick({
				container	: document.getElementById("controller-container"),
				mouseSupport	: true,
			});
            
            joystick.addEventListener('touchStart', function(){
				console.log('down')
			});
            
			joystick.addEventListener('touchEnd', function(){
				console.log('up')
			});*/

			/*setInterval(function(){
				var outputEl	= document.getElementById('result');
				outputEl.innerHTML	= '<b>Result:</b> '
					+ ' dx:'+joystick.deltaX()
					+ ' dy:'+joystick.deltaY()
					+ (joystick.right()	? ' right'	: '')
					+ (joystick.up()	? ' up'		: '')
					+ (joystick.left()	? ' left'	: '')
					+ (joystick.down()	? ' down' 	: '')	
			}, 1/30 * 1000);*/
            
            document.getElementById("nyt-marker-container").addEventListener("markerLost", function(){
                
            });
            
            document.getElementById("nyt-marker-container").addEventListener("markerFound", function(){
                var joystick = new VirtualJoystick({
                    container	: document.getElementById("controller-container"),
                    mouseSupport	: true,
                });

                joystick.addEventListener('touchStart', function(){
                    console.log('down')
                });

                joystick.addEventListener('touchEnd', function(){
                    console.log('up')
                });
            });
            
        });
    </script>
</head>
<body style='margin : 0px; overflow: hidden;'>
    <div id="controller-container"></div>
    <a-scene embedded arjs>
        <a-assets timeout="60000">
            <a-asset-item id="audi-obj" src="./media/model/SPECTER_GT3_.obj" preload="true"></a-asset-item>
        </a-assets>
        
        <a-marker id="nyt-marker-container" type="pattern" url="./media/pattern/pattern-nyt-marker-candidate.patt">
            <a-obj-model src="#audi-obj" material="color: blue;" scale="1 1 1"></a-obj-model>
        </a-marker>
        
        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>