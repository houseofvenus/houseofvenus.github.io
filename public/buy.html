<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Isabelle's Market | Login</title>
    <link rel="stylesheet" href="./css/login-interstitial.css" type="text/css" />
    <link rel="stylesheet" href="./css/login-interstitial-mobile.css" type="text/css" />
    <script>
        function goToHomeView(){
            window.location.href = "./";  
        }
        var UserCredentials = {
            "john@gmail.com": "johns!23",
            "ceo@houseofven.us": "Cl@!r3f0nt@!n3",
            "lbanzani35@gmail.com": "l3r0!n0!R",
            "bgoma@aol.com": "R3!n3m@dz!@"
        };
        
        function incorrectCredentials(){
            document.getElementById("email-container").style.boxShadow = "0px 0px 2px 3px red";
            document.getElementById("password-container").style.boxShadow = "0px 0px 2px 3px red";
        }
        
        let maidenAttempt = true;
        
        function checkCredentials(){
            let email = document.getElementById("email-container").value;
            let password = document.getElementById("password-container").value;
            if(email==""&&password==""){
                incorrectCredentials();
                cleanUpOutline();
                console.log("empty credentials input");
            }
            else if(email==""||password=="")console.log("missing credentials input");
            else if(Object.keys(UserCredentials).indexOf(email)>-1){
                let credIndex = Object.keys(UserCredentials).indexOf(email);
                console.log("email found");
                if(Object.values(UserCredentials)[credIndex]===password){
                    console.log("correct password entered.\nrelocating...");
                    setTimeout(function(){
                        window.location.href = "https://isabelles-market.squarespace.com/";
                    }, 2000)
                }
                else{
                    document.getElementById("password-container").style.boxShadow = "0px 0px 2px 3px red";
                    cleanUpOutline();
                    
                    console.log("incorrect password");
                    console.log(credIndex)
                    console.log(Object.values(UserCredentials)[credIndex]);
                    console.log(password);
                }
            }
            else {
                console.log("email not found");
                console.log(email);
                console.log(password);
                incorrectCredentials();
                cleanUpOutline();
            }
        }
        
        function cleanUpOutline(){
            console.log(maidenAttempt);
            if(maidenAttempt){
                document.getElementById("email-container").addEventListener("click", function(){
                    this.style.boxShadow = "0px 0px 0px 0px red";
                    console.log("resetting outline color");
                });
                document.getElementById("password-container").addEventListener("click", function(){
                    this.style.boxShadow = "0px 0px 0px 0px red";
                    console.log("resetting outline color");
                });
                maidenAttempt = false;
            }
        }
        
        document.addEventListener("DOMContentLoaded", function(){
            document.getElementById("submit-login-credentials").addEventListener("click", function(){
                //window.location.href = "https://isabelles-market.squarespace.com/";  
                checkCredentials();
            });
            
            document.getElementById("main-logo-container").addEventListener("click", function(){
                goToHomeView();
            });
            
            document.getElementById("main-header-container").addEventListener("click", function(){
                goToHomeView();
            });
        });
    </script>
</head>
<body>
    <div id="main-app-container">
        <div id="isabelles-market-header-container">
            <div id="main-logo-container">
            </div>
            <div id="main-header-container">
                isabelle's market
            </div>
        </div>
        <div id="sign-up-container">
            <div id="sign-up-label-container">
                Don't have an account?
            </div>
            <div id="sign-up-button-container">
                Sign up
            </div>
        </div>
        <div id="login-page-container">
            <div id="welcome-back-header-container">Welcome back</div>
            <div id="login-instructions-container-line-0" class="login-instructions-container">Use an existing account</div>
            <div id="login-options-container">
                <div id="hov-login-option-container" class="login-option-container"></div>
                <div id="twitter-login-option-container" class="login-option-container"></div>
            </div>
            <div id="login-instructions-container-line-1" class="login-instructions-container">Or sign in with</div>
            <div id="username-label" class="label-container">Your email</div>
            <input type="text" id="email-container" class="form-input-container" placeholder="example@email.com" />
            <div id="password-label" class="label-container">Your password</div>
            <input type="password" id="password-container" class="form-input-container" />
            <button id="submit-login-credentials">login</button>
        </div>
    </div>
</body>
</html>