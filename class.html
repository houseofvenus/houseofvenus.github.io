<!DOCTYPE html>
<html>
<head>
    <title>Classroom | v. 0.0.3</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="./css/armoir-style.css" type="text/css" />
    <script src="./js/aframe100.js"></script><!--https://aframe.io/releases/1.0.0/-->
    <script src="./js/aframe-ar.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        body, html{
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        #play-button-container{
            width: 75px;
            height: 75px;
            border-radius: 50%;
            position: absolute;
            bottom: 2%;
            left: 50%;
            margin-left: -38px;
            z-index: 500;
            background-color: white;
            color: black;
            line-height: 75px;
            text-align: center;
        }
    </style>
    <script>
        AFRAME.registerComponent('video-cursor-listener', {
            init: function () {
                this.el.addEventListener('click', function (evt) {
                    
                    if(Classroom.onPage<0){
                        document.getElementById("test-video").play();
                        Classroom.onPage++;
                    }

                    console.log('I was clicked at: ', evt.detail.intersection.point);
                    console.log('The student is now on: ', Classroom.onPage);
                    
                });
            }
        });
        
        var Classroom = {
            onPage: -1;
        };
        
        document.addEventListener("DOMContentLoaded", function(){
            
            /*document.getElementById("play-button-container").addEventListener("click", function(){
                document.getElementById("test-video").play();
            });*/
            
            document.getElementById("mit-marker-container").addEventListener("markerLost", function(){
                console.log("found MIT marker!");
            });

            document.getElementById("hiro-marker-container").addEventListener("markerLost", function(){
                console.log("found HIRO marker!");
            });

            document.getElementById("unibeat-marker-container").addEventListener("markerLost", function(){
                console.log("found UNI marker!");
            });
            
        });
    </script>
</head>
<body id="main-app-container">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" id="main-experience-container">
        <a-assets timeout="60000" id="main-experience-container">
            
            <img id="earth-planet-object-texture" src="./media/texture/earthmap1k.jpg" preload="true"/>
            
            <video id="test-video" autoplay="false" preload="true" loop="true" src="../media/vid/temple.mp4"></video>
            
        </a-assets>
        
        <a-marker preset="hiro" id="hiro-marker-container">
            
        </a-marker>
        
        <a-marker id="mit-marker-container" type="pattern" url="./media/pattern/pattern-mit-logo.patt">
            
            <a-entity
                      geometry="primitive:sphere; radius: 0.5;"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"
                      position='0 0.5 -1.5'
                      material='src: #earth-planet-object-texture'></a-entity>
            
        </a-marker>
        
        <a-marker id="unibeat-marker-container" type="pattern" url="./media/pattern/pattern-unibeat.patt">
            <a-video video-cursor-listener src="#test-video" width="3" height="2" position="0 0.5 -1" rotation="-90 0 0"></a-video>
            
            <!--<a-entity id="box" cursor-listener geometry="primitive: box" material="color: blue"></a-entity>
            <a-entity
                      geometry="primitive:sphere; radius: 0.5;"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"
                      position='0 0.5 -1.5'
                      material='src: #earth-planet-object-texture'></a-entity>-->
            
        </a-marker>
        
        <a-entity camera look-controls>
          <a-entity cursor="fuse: true; fuseTimeout: 500"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    material="color: black; shader: flat">
          </a-entity>
        </a-entity>

        <!--<a-camera></a-camera>-->
    </a-scene>
    <!--<div id="play-button-container">
        play
    </div>-->
</body>
</html>